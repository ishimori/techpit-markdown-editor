(this["webpackJsonptechpit-markdown-editor"]=this["webpackJsonptechpit-markdown-editor"]||[]).push([[0],{146:function(e,n,t){"use strict";t.r(n);var r=t(10),i=t(2),c=t(0),o=t(55),a=t(3),s=t(20),b=t(4),d=t(56),l=t.n(d),j=t(23),h=t.n(j),u=t(38),O=new(t(57).a)("markdown-editor");O.version(1).stores({memos:"&datetime"});var x,p,f,m,g,v,w,y,k,S,C,z,I,T,D,E,F,B,J,M,A=O.table("memos"),N=function(){var e=Object(u.a)(h.a.mark((function e(n,t){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(new Date).toISOString(),e.next=3,A.put({datetime:r,title:n,text:t});case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),q=function(){var e=Object(u.a)(h.a.mark((function e(){var n,t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.count();case 2:return n=e.sent,t=Math.ceil(n/10),e.abrupt("return",t>0?t:1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(e){var n=10*(e-1);return A.orderBy("datetime").reverse().offset(n).limit(10).toArray()},H=t(1),K=a.b.button(x||(x=Object(i.a)(["\n  background-color: dodgerblue;\n  border: none;\n  box-shadow: none;\n  color: white;\n  font-size: 1rem;\n  height: 2rem;\n  min-width: 5rem;\n  padding: 0 1rem;\n\n  &.cancel {\n    background: white;\n    border: 1px solid gray;\n    color: gray;\n  }\n"]))),L=function(e){return Object(H.jsx)(K,{onClick:e.onClick,className:e.cancel?"cancel":"",children:e.children})},P=a.b.div(p||(p=Object(i.a)(["\n  align-items: center;\n  background-color: #0002;\n  bottom: 0;\n  display: flex;\n  justify-content: center;\n  left: 0;\n  position: fixed;\n  right: 0;\n  top: 0;\n"]))),Q=a.b.div(f||(f=Object(i.a)(["\n  background: #fff;\n  padding: 1rem;\n  width: 32rem;\n"]))),R=a.b.input(m||(m=Object(i.a)(["\n  width: 29rem;\n  padding: 0.5rem;\n"]))),U=a.b.div(g||(g=Object(i.a)(["\n  display: flex;\n  justify-content: space-evenly;\n  padding: 1rem;\n"]))),V=function(e){var n=e.onCancel,t=e.onSave,i=Object(c.useState)((new Date).toISOString()),o=Object(r.a)(i,2),a=o[0],s=o[1];return Object(H.jsx)(P,{children:Object(H.jsxs)(Q,{children:[Object(H.jsx)("p",{children:"\u30c6\u30ad\u30b9\u30c8\u306e\u5185\u5bb9\u3092\u4fdd\u5b58\u3057\u307e\u3059"}),Object(H.jsx)("p",{children:"\u4fdd\u5b58\u5185\u5bb9\u306e\u30bf\u30a4\u30c8\u30eb\u3092\u5165\u529b\u3057\u3066\u4fdd\u5b58\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u4e0b\u3055\u3044"}),Object(H.jsx)("p",{children:Object(H.jsx)(R,{type:"text",value:a,onChange:function(e){return s(e.target.value)}})}),Object(H.jsxs)(U,{children:[Object(H.jsx)(L,{onClick:n,cancel:!0,children:"\u30ad\u30e3\u30f3\u30bb\u30eb"}),Object(H.jsx)(L,{onClick:function(){return t(a)},children:"\u4fdd\u5b58"})]})]})})},W=a.b.header(v||(v=Object(i.a)(["\n  align-content: center;\n  display: flex;\n  height: 2rem;\n  justify-content: space-between;\n  line-height: 2rem;\n  padding: 0.5rem 1rem;\n"]))),X=a.b.div(w||(w=Object(i.a)(["\n  font-size: 1.5rem;\n"]))),Y=a.b.div(y||(y=Object(i.a)(["\n  align-content: center;\n  display: flex;\n  height: 2rem;\n  justify-content: center;\n\n  & > * {\n    margin-left: 0.5rem;\n  }\n"]))),Z=function(e){return Object(H.jsxs)(W,{children:[Object(H.jsx)(X,{children:e.title}),Object(H.jsx)(Y,{children:e.children})]})},$=a.b.div(k||(k=Object(i.a)(["\n  bottom: 0;\n  left: 0;\n  position: fixed;\n  right: 0;\n  top: 3rem;\n"]))),_=a.b.div(S||(S=Object(i.a)(["\n  position: fixed;\n  right: 0;\n  top: 0;\n  left: 0;\n"]))),ee=a.b.textarea(C||(C=Object(i.a)(["\n  border-right: 1px solid silver;\n  border-top: 1px solid silver;\n  bottom: 0;\n  font-size: 1rem;\n  left: 0;\n  padding: 0.5rem;\n  position: absolute;\n  top: 0;\n  width: 50vw;\n"]))),ne=a.b.div(z||(z=Object(i.a)(["\n  border-top: 1px solid silver;\n  bottom: 0;\n  overflow-y: scroll;\n  padding: 1rem;\n  position: absolute;\n  right: 0;\n  top: 0;\n  width: 50vw;\n"]))),te=function(e){var n=e.text,t=e.setText,i=Object(c.useState)(!1),o=Object(r.a)(i,2),a=o[0],b=o[1];return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(_,{children:Object(H.jsxs)(Z,{title:"Markdown Editor",children:[Object(H.jsx)(L,{onClick:function(){return b(!0)},children:"\u4fdd\u5b58\u3059\u308b"}),Object(H.jsx)(s.b,{to:"/history",children:"\u5c65\u6b74\u3092\u898b\u308b"})]})}),Object(H.jsxs)($,{children:[Object(H.jsx)(ee,{onChange:function(e){return t(e.target.value)},value:n}),Object(H.jsx)(ne,{children:Object(H.jsx)(l.a,{source:n})})]}),a&&Object(H.jsx)(V,{onSave:function(e){N(e,n),b(!1)},onCancel:function(){return b(!1)}})]})},re=a.b.div(I||(I=Object(i.a)(["\n  position: fixed;\n  right: 0;\n  top: 0;\n  left: 0;\n"]))),ie=a.b.div(T||(T=Object(i.a)(["\n  bottom: 3rem;\n  left: 0;\n  position: fixed;\n  right: 0;\n  top: 3rem;\n  padding: 0 1rem;\n  overflow-y: scroll;\n"]))),ce=a.b.button(D||(D=Object(i.a)(["\n  display: block;\n  background-color: white;\n  border: 1px solid gray;\n  width: 100%;\n  padding: 1rem;\n  margin: 1rem 0;\n  text-align: left;\n  white-space: nowrap;\n"]))),oe=a.b.div(E||(E=Object(i.a)(["\n  bottom: 0;\n  height: 3rem;\n  left: 0;\n  line-height: 2rem;\n  padding: 0.5rem;\n  position: fixed;\n  right: 0;\n  text-align: center;\n"]))),ae=a.b.button(F||(F=Object(i.a)(["\n  background: none;\n  border: none;\n  display: inline-block;\n  height: 2rem;\n  padding: 0.5rem 1rem;\n\n  &:disabled {\n    color: silver;\n  }\n"]))),se=a.b.div(B||(B=Object(i.a)(["\n  font-size: 1rem;\n  margin-bottom: 0.5rem;\n"]))),be=a.b.div(J||(J=Object(i.a)(["\n  font-size: 0.85rem;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"]))),de=function(e){var n=e.setText,t=Object(c.useState)([]),i=Object(r.a)(t,2),o=i[0],a=i[1],d=Object(c.useState)(1),l=Object(r.a)(d,2),j=l[0],h=l[1],u=Object(c.useState)(1),O=Object(r.a)(u,2),x=O[0],p=O[1],f=Object(b.g)();Object(c.useEffect)((function(){G(1).then(a),q().then(p)}),[]);var m=j<x,g=j>1,v=function(e){e<1||x<e||(h(e),G(e).then(a))};return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(re,{children:Object(H.jsx)(Z,{title:"\u5c65\u6b74",children:Object(H.jsx)(s.b,{to:"editor",children:"\u30a8\u30c7\u30a3\u30bf\u306b\u623b\u308b"})})}),Object(H.jsxs)(ie,{children:["TODO:\u5c65\u6b74\u8868\u793a",o.map((function(e){return Object(H.jsxs)(ce,{onClick:function(){n(e.text),f.push("/editor")},children:[Object(H.jsx)(se,{children:e.title}),Object(H.jsx)(be,{children:e.text})]},e.datetime)}))]}),Object(H.jsxs)(oe,{children:[Object(H.jsx)(ae,{onClick:function(){return v(j-1)},disabled:!g,children:"\uff1c"}),j," / ",x,Object(H.jsx)(ae,{onClick:function(){return v(j+1)},disabled:!m,children:"\uff1e"})]})]})},le=Object(a.a)(M||(M=Object(i.a)(["\n  body * {\n    box-sizing: border-box;\n  }\n"]))),je=function(){var e=function(e,n){var t=Object(c.useState)(localStorage.getItem(n)||e),i=Object(r.a)(t,2),o=i[0],a=i[1];return[o,function(e){a(e),localStorage.setItem(n,e)}]}("","/editor:text"),n=Object(r.a)(e,2),t=n[0],i=n[1];return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(le,{}),Object(H.jsx)(s.a,{children:Object(H.jsxs)(b.d,{children:[Object(H.jsx)(b.b,{exact:!0,path:"/editor",children:Object(H.jsx)(te,{text:t,setText:i})}),Object(H.jsx)(b.b,{exact:!0,path:"/history",children:Object(H.jsx)(de,{setText:i})}),Object(H.jsx)(b.a,{to:"/editor",path:"*"})]})})]})};Object(o.render)(Object(H.jsx)(je,{}),document.getElementById("root"))}},[[146,1,2]]]);
//# sourceMappingURL=main.b8f97ffc.chunk.js.map